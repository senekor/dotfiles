#!/bin/bash
set -euo pipefail

# This is a convenience script to generate a variety of boilerplate-y files.
#
# For example, a new Bash script with all the right error-handling flags or
# a Rust script with the correct cargo invocation.

path="$1"
dir="$(dirname "$path")"
mkdir --parents "$dir"
touch "$path"
chmod +x "$path"

options="\
bash
rust"

choice="$(echo "${options[@]}" | fzf)"

case "$choice" in
  bash)
    content="\
#!/bin/bash
set -euo pipefail

echo \"Hello, world!\""
    ;;
  rust)
    content="\
#!/usr/bin/env -S cargo +nightly -Zscript --quiet

fn main() {
    println!(\"Hello, world!\");
}"
    ;;
esac

echo "$content" > "$path"
